<!DOCTYPE html>
<html lang="en">
<head>
    <title>PickUp</title>
    <link rel="stylesheet" href="csspage.css">
    <link rel="stylesheet" href="STable.css">
</head>
<body onload="callGetFromAvb()">
<img src="coffeesp.png" alt="coffee logo" width="400" height="150" class="coffee logo">
<div>
    <ul>
        <li class="menu"><a href="ShiftSpot.html">Log Out</a></li>
        <li class="menu"><a href="Profile.html">My Profile</a></li>
        <li class="menu"><a href="Schedule.html">My Schedule</a></li>
        <li class="menu"><a href="PickUp.html">Available Shifts</a></li>
        <li class="menu"><a href="Manager.html">Manager</a></li>
    </ul>
</div>
<H1>Open Shifts</H1>
<div id="main">
</div>
<script>
    function callGetFromAvb()
    {
        (async () =>
        {
            var emp_id = sessionStorage.getItem("available");
            const rawResponse = await fetch('http://localhost:8000/API/shifts/available',
                {
                    Method: 'GET',
                    Mode: 'cors',
                    Headers:
                        {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                });
            const response = await rawResponse.json();
            for (let i = 0; i < response.length; i++) {
                var div = document.createElement("div");
                div.style.display = "inline-block";
                div.innerHTML= "<div class=\"schedule-card\">\n" +
                    "            <br />\n" +
                    "            <div id= \"cafe_id\" class=\"title\">Store number: "+ response[i].cafe_id+"</div>\n" +
                    "            <div id= \"day_of_week\" class=\"title\">Day of Week: " + response[i].day_of_week+" </div>\n" +
                    "            <div id= \"shift_id\" class=\"title\">Shift Time: " + response[i].shift_id+" </div>\n" +
                    "            <button type=\"submit\" onclick = \"sendShiftManager()\">Accept Shift</button>\n" +
                    "        </div> <br>";
                document.getElementById("main").appendChild(div);
            }})();
    }
    function sendShiftManager()
    {
        alert ("Request sent to manager")
    }
</script>
</body>
</html>